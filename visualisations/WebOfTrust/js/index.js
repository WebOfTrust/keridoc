document.querySelector(".search-input").focus(),fetch("data/2023-05-25-data.json").then((t=>t.json())).then((t=>visualize(t)));let width=window.innerWidth,height=window.innerHeight,centerX=width/2,centerY=height/2,colorNodeInactive="rgba(238, 238, 238, 0.406)",colorNodeActive="#f6b93b",colorLinkInactive="#4a69bd",colorLinkActive="lightblue",colorTextInactive="#4a69bd",colorTextActive="lightblue",nodeRadiusActive=15,nodeRadiusInactive=8;function visualize(t){let e=t.nodes,i=t.links,n=[];var r;function o(t,e){return Array.isArray(e)&&e.indexOf(t.id)>-1?colorNodeActive:colorNodeInactive}function a(t,e){return Array.isArray(e)&&e.indexOf(t.id)>-1?"drop-shadow(0px 0px 10px rgb(246, 184, 59, 1))":"none"}document.querySelector(".search-results-list").addEventListener("click",(function(t){t.target.matches("li")&&e.forEach((function(e){if(e.id===t.target.innerHTML){u(e);let t=centerX-e.x,i=centerY-e.y;c.transition().duration(1e3).call(y.transform,d3.zoomIdentity.translate(t,i))}})),t.target.matches(".close")}),!1),(r="id",e.sort((function(t,e){var i=t[r],n=e[r];return i<n?-1:i>n?1:0}))).forEach((function(t,e){n.push(`<li data-indexnumber="${e}">`+t.id+"</li>")})),document.querySelector(".search-results-list").innerHTML=n.join(""),document.querySelector(".search-input").addEventListener("input",(function(){!function(t,e){let i=document.querySelector(".search-input").value;n=[],t.forEach((function(t,e){t.id.includes(i)&&n.push(`<li data-indexnumber="${e}">`+t.id+"</li>")})),document.querySelector(".search-results-list").innerHTML=n.join("")}(e)}));let c=d3.select("svg");c.attr("width",width).attr("height",height);d3.forceLink().id((function(t){return t.id})).strength((function(t){return t.size}));let s=d3.forceSimulation().force("link",d3.forceLink().distance(300).id((function(t){return t.id}))).force("charge",d3.forceManyBody().strength(-100)).force("center",d3.forceCenter(width/2,height/2)).alphaDecay(.02),d=d3.drag().on("start",(function(t){t.fx=t.x,t.fy=t.y})).on("drag",(function(t,e){s.alphaTarget(.7).restart(),t.fx=e.x,t.fy=e.y})).on("end",(function(t,e){e.active||s.alphaTarget(0),t.fx=null,t.fy=null}));function u(t){let e=(n=t,i.reduce((function(t,e){return e.target.id===n.id?t.push(e.source.id):e.source.id===n.id&&t.push(e.target.id),t}),[n.id]));var n;f.attr("fill",(function(t){return o(t,e)})),f.attr("r",(function(t){return function(t,e){return Array.isArray(e)&&e.indexOf(t.id)>-1?nodeRadiusActive:nodeRadiusInactive}(t,e)})),f.attr("filter",(function(t){return a(t,e)})),h.attr("fill",(function(t){return function(t,e){return Array.isArray(e)&&e.indexOf(t.id)>-1?colorTextActive:colorTextInactive}(t,e)})),l.attr("stroke",(function(e){return function(t,e){return function(t,e){return e.target.id===t.id||e.source.id===t.id}(t,e)?colorLinkActive:colorLinkInactive}(t,e)}))}let l=c.append("g").attr("class","links").selectAll("line").data(i).enter().append("line").attr("stroke-width",1).attr("stroke",colorLinkInactive),h=c.append("g").attr("class","texts").selectAll("text").data(e).enter().append("text").text((function(t){return t.id})).attr("font-size",15).attr("fill",colorTextInactive).attr("dx",15).attr("dy",4),f=c.append("g").attr("class","nodes").selectAll("circle").data(e).enter().append("circle").attr("r",nodeRadiusInactive).attr("fill",o).attr("filter",a).call(d).on("click",(function(t,e){u(e)}));s.nodes(e).on("tick",(()=>{f.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})),h.attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})),l.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y}))})),s.force("link").links(i);let y=d3.zoom().on("zoom",(function(t){f.attr("transform",t.transform),l.attr("transform",t.transform),h.attr("transform",t.transform)}));c.call(y)}window.onload=function(){window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;const t=document.createElement("canvas"),e=t.getContext("2d");let i,n,r;function o(t){this.id=t,this.x=Math.random()*i,this.y=Math.random()*window.outerHeight,this.on=Math.random()>.1,this.size=12*Math.random()+1,this.opacity=this.on?.8*Math.random():0,this.clign=Math.random()>.5}function a(){i=window.outerWidth,r=i/5,t.width=window.outerWidth,t.height=window.outerHeight,n=[],r=i/5;for(let t=0;t<r;t++)n[t]=new o(t)}o.prototype.draw=function(){let t=this.size/2,i=this.size/2.75,n=this.x+t,r=this.y+t,o=Math.random(),a=o*(.015-.005)+.005;this.on?((this.opacity>.4*o+.6||this.opacity<.3*o)&&(this.clign=!this.clign),this.opacity=this.clign?this.opacity+a:this.opacity-a,this.on=o>.005):(this.opacity=this.opacity<0?0:this.opacity-a,this.on=o>.5),e.fillStyle="#fff",e.globalAlpha=this.opacity<0?0:this.opacity,e.globalAlpha=this.opacity>1?1:this.opacity,e.beginPath(),e.moveTo(n,this.y),e.bezierCurveTo(this.x+i,r,this.x+i,r,n,this.y+this.size),e.bezierCurveTo(this.x+this.size-i,r,this.x+this.size-i,r,n,this.y),e.fill(),e.closePath(),e.beginPath(),e.moveTo(this.x,r),e.bezierCurveTo(n,this.y+i,n,this.y+i,this.x+this.size,r),e.bezierCurveTo(n,this.y+this.size-i,n,this.y+this.size-i,this.x,r),e.fill(),e.closePath()},t.id="stars",document.body.appendChild(t),a(),function i(){e.clearRect(0,0,t.width,t.height);for(let t in n)n[t].draw();requestAnimationFrame(i)}(),window.addEventListener("resize",a)};const audio=document.querySelector("#audio"),button=document.querySelector("#audio-play");button.addEventListener("click",(function(t){t.preventDefault(),audio.paused?(audio.play(),button.innerHTML="\u23f8"):(audio.pause(),button.innerHTML="\u25b6\ufe0f")}));